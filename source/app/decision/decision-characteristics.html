<!-- TODO: make as nested route -->
<div class="app-container-sm">
    <div class="row">
        <div class="col-sm-9">
            <h3 class="app-title-inline" ng-bind="::vm.decision.name"></h3>
            <div class="post-header">
                <div class="nav-tabs-wrapper clearfix">
                    <ul class="nav nav-tabs nav-tabs-sm">
                        <li>
                            <a ui-sref="decisions.single(::{id:vm.decision.id, slug:vm.decision.nameSlug, size: null, page: null})" ui-sref-opts="{reload: true}" translate-cloak>{{ 'General Info' | translate }}</a>
                        </li>
                        <li class="active">
                            <a href="#" translate-cloak>{{ 'CHARACTERISTICS' | translate }}</a>
                        </li>
<!--                         <li ng-repeat="parent in vm.ParentDecisionGroups track by $index" ui-sref-active="active">
                            <a ui-sref="decisions.single.characteristics(::{parentId:parent.id, parentSlug:parent.nameSlug})">{{ ::parent.ownerDecision.name }}/{{ ::parent.name }}</a>
                        </li> -->
                        <li>
                            <a ui-sref="decisions.single.reviews" translate-cloak>{{ 'Reviews' | translate }}</a>
                        </li>
                        <li>
                            <a ui-sref="decisions.single.categories({category: null})" translate-cloak>{{ 'CATEGORIES' | translate }}</a>
                        </li>
                        <li>
                            <a ui-sref="decisions.single.nominations({sort: null})" translate-cloak>{{ 'Nominations' | translate }}</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="post post-single">

                <div ng-if="vm.decision.parentDecisionGroups.length">



                    <div class="nav-tabs-wrapper mg-b-md tabs-left clearfix">
                        <ul class="nav nav-tabs nav-tabs-sm">
                            <li ng-repeat="parentDecision in vm.decision.parentDecisionGroups track by $index" ng-class="{'active':parentDecision.ownerDecision.nameSlug === vm.parent.ownerDecision.nameSlug}">
                                <a ui-sref="decisions.single.characteristics(::{characteristicSlug:parentDecision.ownerDecision.nameSlug, category: null})" ui-sref-opts="{notify: false}" ng-click="vm.changeCategoryTab(parentDecision.ownerDecision.nameSlug)">{{ parentDecision.ownerDecision.name }}</a>

                            </li>
                        </ul>
                    </div>


                    <div class="nav-tabs-wrapper border-0 clearfix tabs-right">
                        <ul class="nav nav-pills nav-tabs-sm">
                            <li ng-repeat="parent in vm.ParentDecisionGroups track by $index" ng-class="{'active': parent.nameSlug === vm.parent.nameSlug }">
                                <a ui-sref="decisions.single.characteristics(::{sort: null, category: parent.nameSlug, characteristicSlug:parent.ownerDecision.nameSlug})" >{{ ::parent.name }}</a>
                            </li>
                        </ul>
                    </div>

                </div>

                <div ng-if="!vm.decision.parentDecisionGroups.length">
                    <span class="text-header"  translate-cloak>
                        {{ 'NO CHARACTERISTICS' | translate }}.
                    </span>
                </div>

                <div ng-if="vm.parent">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="clearfix">
                                <h5 ng-show="vm.decisionIndexInParentGroup >= 0" class="pull-left">
                                    <a ui-sref="decisions.single.categories(::{id: vm.parent.id, slug: vm.parent.ownerDecision.nameSlug, size: null, page: null, sort: 'topRated', page: vm.decisionIndexInParentGroupPage, size: 10, categorySlug: vm.parent.nameSlug, decisionId: vm.decision.id})">
                                    <strong>#{{ vm.decisionIndexInParentGroup }}</strong></a>
                                        {{ 'IN' | translate }} {{ vm.parent.name }}
                                </h5>
                                <div class="pull-left text-header" ng-if="vm.activeRecommendedTab.total >= 0">
                                    <a ui-sref="decisions.single.categories(::{id: vm.parent.id, slug: vm.parent.ownerDecision.nameSlug, size: null, page: null, sort: 'topRated', categorySlug: vm.parent.nameSlug})" class="see-all">
                                        {{ 'See All' | translate }} <span class="info">({{vm.activeRecommendedTab.total}})</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">

                            <div class="clearfix" ng-show="vm.criteriaGroups">

                                <h4 class="app-list-title pull-left" translate-cloak>{{ 'CRITERIA COMPLIANCE' | translate }}</h4>
                                <div ng-switch="vm.decision.criteriaCompliancePercentage >= 0 && vm.criteriaGroups.totalVotes > 0">
                                    <div ng-switch-when="true" class="criteria-block static pull-right">
                                        <div class="counters">
                                            <strong ng-bind="vm.decision.criteriaCompliancePercentage"></strong>%
                                        </div>
                                        <div class="counters criteria-block-votes">
                                            <span class="icon-svg-vote"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M501.333 0c-25.11 0-57.024 16.128-66.475 21.205L298.668.363c-19.137 0-65.324 1.237-80.3 12.267L133.035 65.6c-4.053 2.517-5.93 7.403-4.63 11.99 1.324 4.586 5.505 7.743 10.262 7.743h96c.853 0 1.685-.107 2.517-.256l14.293-3.52c9.237-1.344 18.453 1.408 25.472 7.488 7.04 6.08 11.05 14.89 11.05 24.192 0 7.403-2.304 14.464-6.677 20.46l-33.557 46.1c-9.365 14.037-7.51 32.896 4.437 44.843 6.933 6.912 16.02 10.39 25.13 10.39s18.198-3.478 25.132-10.412l54.08-54.08c20.203-1.13 38.677-9.856 52.373-23.936 18.944 17.557 79.573 23.125 91.584 24.043.277.02.555.02.832.02 2.667 0 5.27-1.002 7.232-2.836C510.763 165.8 512 162.964 512 160V10.667C512 4.78 507.22 0 501.334 0zm-85.29 71.296l-12.31 46.7c-10.11 19.348-29.844 31.338-51.732 31.338-2.836 0-5.546 1.11-7.55 3.115l-57.09 57.087c-5.354 5.355-14.72 5.355-20.074 0-4.78-4.757-5.525-12.31-2.027-17.557l33.322-45.74c7.04-9.663 10.752-21.098 10.752-33.044 0-15.467-6.7-30.165-18.39-40.3-9.663-8.362-21.887-12.927-35.028-12.927-2.773 0-5.61.212-8.448.618L233.408 64h-57.344l54.25-33.707c6.678-4.907 36.054-8.597 66.732-8.725l126.528 19.477c-2.07 7.403-4.758 17.856-7.53 30.25zm74.624 76.97c-23.06-2.602-51.392-7.914-63.467-14.634 2.133-20.736 5.888-40.832 9.6-57.43l9.77-37.076c9.857-5.184 28.225-13.61 44.097-16.66v125.8z"/><path d="M405.163 392.917l-21.333-128c-.853-5.14-5.29-8.917-10.517-8.917H320c0-5.888-4.78-10.667-10.667-10.667s-10.667 4.78-10.667 10.667v10.56c0 .043-.02.064-.02.107s.02.064.02.107V320h-192V128H256c5.888 0 10.667-4.78 10.667-10.667s-4.78-10.667-10.667-10.667H96c-5.888 0-10.667 4.78-10.667 10.667V256H32c-5.205 0-9.664 3.776-10.517 8.917l-21.333 128c-.043.277.064.533.043.79-.022.34-.193.618-.193.96v106.667C0 507.22 4.78 512 10.667 512h384c5.888 0 10.667-4.78 10.667-10.667V394.667c0-.363-.17-.683-.213-1.024-.02-.256.085-.49.043-.726zM41.023 277.333h44.31V320H74.667C68.78 320 64 324.78 64 330.667s4.78 10.667 10.667 10.667h256c5.888 0 10.667-4.78 10.667-10.667S336.554 320 330.667 320H320v-42.667h44.288L382.058 384H23.254l17.77-106.667zM384 490.667H21.333v-85.333H384v85.333z"/></svg></span>
                                            {{ vm.criteriaGroups.totalVotes }}
                                        </div>
                                        <div ng-if="vm.decision.criteriaCompliancePercentage >= 0" class="criteria-block-rating">
                                            <rating-star class="text-left" percentage="::vm.decision.criteriaCompliancePercentage"></rating-star>
                                        </div>
                                    </div>


                                </div>
                            </div>

                            <div class="list-wrapper">
                                <div ng-show="vm.criteriaGroupsLoader" class="app-loader-small"><span></span></div>

                                <criteria-list ng-if="vm.criteriaGroups" list="vm.criteriaGroups" links="false" rating="true" criteria-title="false" discussion="true" discussion-link="false" collapsed="false"></criteria-list>

                            </div>

                        </div>
                        <div class="col-sm-6">
                            <div class="list-wrapper">
                                <div ng-show="vm.characteristicGroupsLoader" class="app-loader-small"><span></span></div>

                                <characteristics-list ng-if="vm.characteristicGroups" list="vm.characteristicGroups" links="false" rating="true" discussion="true" discussion-link="false" collapsed="false"></characteristics-list>
                            </div>
                        </div>


                    </div>
                </div>

            </div>
        </div>

        <!-- TODO: move to component -->
        <!-- Recommended Start -->
        <div class="col-sm-3 recommended-list" ng-if="vm.ParentDecisionGroups.length">
            <h4>{{ "Recommended" | translate }}</h4>

            <div class="nav-tabs-wrapper tabs-left">
                <ul class="nav nav-tabs nav-tabs-sm">
                    <li ng-repeat="parent in vm.ParentDecisionGroups track by $index" ng-class="{'active':vm.activeRecommendedTab.id === parent.id}">
                        <a ng-click="vm.getRecommendedDecisions(vm.decision.id, parent)">{{ ::parent.ownerDecision.name }}/{{::parent.name}}</a>
                    </li>
                </ul>
                <div class="pull-right text-header">
                    <a ui-sref="decisions.single.categories(::{id:vm.activeRecommendedTab.id, slug:vm.activeRecommendedTab.nameSlug, size: null, page: null, sort: null, category: null})" class="see-all">
                        {{ 'See All' | translate }} <span class="info">({{vm.activeRecommendedTab.total || 0}})</span>
                    </a>
                </div>
            </div>

            <decisions-list class-name="'cards'" compare="true" list="vm.recommendedDecisionsList" criteria-groups-list="vm.criteriaGroups" criteria-list="true" parent-decision="vm.activeRecommendedTab"></decisions-list>

            <div ng-show="vm.recommendedDecisionsListLoader" class="app-loader-small"><span></span></div>

        </div>
        <!-- End Recommended Start -->

    </div>

</div>
