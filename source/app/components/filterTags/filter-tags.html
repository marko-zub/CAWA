<div id="filter-tags" class="filter-tags">
    <div class="filter-tags-group sorted-panel clearfix" ng-show="vm.tagsSort.length > 0 || vm.sortByCharacteristic.name || vm.sortByDecisionProperty.name">
        <div class="filter-tags-label">{{ "SORTED BY" | translate }}: <span ng-show="vm.tagsSort.length > 0" class="display-inline-block">weighted average vote <span class="app-link" ng-click="vm.changeCriteriaOrder(vm.filterObject.sortByCriteria.order, $event)" ng-bind="vm.filterObject.sortByCriteria.order"></span> for
            </span>
        </div>
        <div class="tag-group-wrapper tag-group-wrapper-criteria">
            <div class="tag-group">
                <div class="tag-wrapper" ng-repeat="tag in vm.tagsSort track by tag.id" ng-show="vm.tagsSort.length > 0">
                    <div class="tag">
                        <div ng-click="vm.showCriteriaPopup($event, tag)" uib-tooltip="{{ 'FACTOR OF IMPORTANCE' | translate }}: {{ tag.coefficient.name || 'normal' }}" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip-class="tooltip-light" class="criteria-coefficient-indicator-new">
                            <span class="indicator bg-color-{{ tag.coefficient.name }}"></span>
                        </div>
                        {{::tag.name}}<span ng-click="vm.removeCriteriaTag(tag)" class="icon-remove"><i class="fa fa-times" aria-hidden="true"></i></span>
                    </div><span ng-show="!$last" class="tag-divider">and</span>
                </div>

                <div class="tag-wrapper" ng-show="vm.sortByCharacteristic.name">
                    <div class="tag">
                        {{ vm.sortByCharacteristic.name }}
                        <span class="app-link text-bold" ng-click="vm.changeCharacteristicsOrder(vm.sortByCharacteristic.order, vm.sortByCharacteristic.id)">{{ vm.sortByCharacteristic.order }}</span>
                        <span ng-click="vm.changeCharacteristicsOrder(null)" class="icon-remove"><i class="fa fa-times" aria-hidden="true"></i></span>
                    </div>
                </div>

                <div class="tag-wrapper" ng-show="vm.sortByDecisionProperty.name">
                    <div class="tag">
                        {{ vm.sortByDecisionProperty.name | translate}}
                        <span class="app-link text-bold" ng-click="vm.changeSortByDecisionPropertyOrder(vm.sortByDecisionProperty, $event)">{{ vm.sortByDecisionProperty.order }}</span>
                        <span ng-click="vm.changeSortByDecisionPropertyOrder(null)" class="icon-remove"><i class="fa fa-times" aria-hidden="true"></i></span>
                    </div>
                </div>

                <!-- TODO: simplify conditions move to conroller -->
                <div class="tag-wrapper" ng-show="vm.tagsSort.length > 1 || (vm.sortByCharacteristic.name || vm.sortByDecisionProperty.name) && vm.tagsSort.length > 0">
                    <div class="tag tag-btn" ng-click="vm.clearAllCriteria()" translate-cloak>
                        {{ "CLEAR ALL" | translate }}
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="filter-tags-group" ng-show="vm.tagsFilter.length > 0">
        <div class="filter-tags-label">{{ "FILTERED BY" | translate }}: </div>
        <div class="tag-group-wrapper">
            <div class="tag-group" ng-repeat="tag in vm.tagsFilter track by tag.characteristicId">
                <span>{{::tag.name}}:</span>
                <div class="tag-wrapper" ng-repeat="tagVal in tag.data track by $index">
                    <div class="tag">
                        {{tagVal}}<span ng-click="vm.removeTag(tag, tagVal)" class="icon-remove"><i class="fa fa-times" aria-hidden="true"></i></span>
                    </div><span ng-show="tag.data.length > 1 && !$last" ng-bind="tag.operator" class="tag-divider"></span>
                </div>
                <div class="tag-wrapper" ng-if="$last && vm.tagsFilter.length > 1 || $last && vm.tagsFilter.length > 0 && vm.tagsFilter[0].data.length > 1">
                    <div class="tag tag-btn" ng-click="vm.clearAllCharacterisrics()" translate-cloak>
                        {{ "CLEAR ALL" | translate }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>